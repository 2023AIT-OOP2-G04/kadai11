# はじめに

#### <span style="color:  red;">※VScode上で、`［Shift］＋［Command］＋［V］` を押してもらえれば.mdファイルをプレビュー表示できます。そちらを使用して閲覧してください。</span>
<br>
今回のプロジェクトの取り組み方についてこのREADMEで解説しています。
今回チーム開発を行っていく上で、最終課題が成果物よりチーム開発のプロセスを評価の基準にしていそうだったので練習として今回からしっかりとルールを決めていこうと思います。
自分もGitHubを使ったチーム開発の経験は無いので、絶対に不備があると思います。それはその都度修正していくつもりです。
ちょっとでも不便・不満に思うことや、不備等あったらリーダーまで遠慮なく連絡してください。
<br>
<br>

# 目次

- [コーディングルールについて](#coding-rules)
- [開発構成の概要](#system-configuration)
- [各種リポジトリのリンク](#repository)
- [構成図](#architecture-diagram)
- [使用技術](#technology-used)
- [環境構築の手順](#setup-guide)
- [ディレクトリ構造](#directory-structure)
- [分担早見表](#component-responsibilities)
- [GitとGitHubの運用方法](#git-github-workflow)
- [Discordの運用方法](#discord-workflow)

<br>
<br>
 <h1 id="coding-rules">コーディングルールについて</h1>

今回の課題のプロジェクトの骨組みを作成しておいたのでそちらを基にして進めてください。  
以下のことをルールとして定めようと思ってます。

- 命名規則
    - 作成する変数名はローワーキャメルケースで書く
    - 作成するクラス名はアッパーキャメルケースでかく
- 関数にはアノテーション（型ヒント）を入れる
    - pythonにはアノテーション、jsにはJSDOCがあります。今回PRをする都合上、作成するプログラムは他人に見られる前提になります。可読性の良いプログラムを書きましょう。

また、フォルダやプログラムファイルを追加・削除する場合は事前又は事後にリーダーまで連絡をお願いします。
<br>
<br>
 <h1 id="system-configuration">開発構成の概要</h1>

- 第12回のpdfのリンクを置いときます。詳しくは[こちら](https://cms.aitech.ac.jp/pluginfile.php/512836/mod_folder/content/0/%20%E7%AC%AC11%E5%9B%9E%E3%83%81%E3%83%BC%E3%83%A0%E9%96%8B%E7%99%BA%E8%AA%B2%E9%A1%8C.pdf?forcedownload=1)を参照してください。
<br>
<br>
 <h1 id="repository">各種リポジトリのリンク</h1>

と言いつつ一つしかないです → [kadai11](https://github.com/2023AIT-OOP2-G04/kadai11.git)  
これが読めてるってことはwebから見てない限りクローン出来ているので気にしないでください。
<br>
<br>
 <h1 id="architecture-diagram">構成図</h1>

図に起こす程のものじゃなかったので簡単に

- フロントエンド　→ html,css,js
- バックエンド
    - サーバ　→ python(Flask)
    - 画像処理　→ python(openCV)  
<br>
<br>
 <h1 id="technology-used">使用技術</h1>

cssのフレームワークにnew.cssを講義のやつを流用して使ってます。  
pythonのライブラリに関してはディレクトリ直下のrequirements.txtに書き出してあります。  
`pip install -r requirements.txt` で一括インストールできます。
<br>
<br>
 <h1 id="setup-guide">環境構築の手順</h1>

pythonで必要なライブラリをインストールすれば大丈夫です。  
講義で使ったpyenvを使用してください。
<br>
<br>
 <h1 id="directory-structure">ディレクトリ構造</h1>

## <span style="color: red;">ここからは大事な事が続くのでよく目を通しておいてください</span>

<br>

├── main.py #ここでサーバの起動  
├── module   
│&ensp;├── directoryMonitoring.py #ディレクトリ監視関数をここにかく  
│&ensp;└── postProcessing.py #画像処理の関数をここにかく  
├── requirements.txt #ここにpythonのライブラリ一覧が載ってます  
├── static   
│&ensp;├── img #ここに画像を保存  
│&ensp;│&ensp;├── upload #アップロードした画像はここ  
│&ensp;│&ensp;├── processed #画像処理後の画像はここ  
│&ensp;│&ensp;└── test #デバッグ用フォルダ  
│&ensp;└── main.js #画像アップロードページ用jsファイル  
│&ensp;└── show.js #画像一覧表示ページ用jsファイル  
└── templates   
├── index.html #"/"でアクセスできる画像アップロードページ  
└── show.html #"/show"でアクセスできる画像一覧表示ページ
<br>
<br>
 <h1 id="component-responsibilities">プロジェクトの作業分担早見表</h1>

今回、プロジェクトを7つに分担して作業をしていきます。  
以下に、それぞれの作業内容を書いておきます。  
<br/>

<details><summary>分担早見表</summary>

| 番号  | 概要  | 担当者 | 使用言語 | 実装の流れ | デバッグ方法 |
| --- | --- | --- | --- | --- | --- |
| 1   | ファイルアップロードインターフェイス |     | python,html,css,js | 画像をアップロードするwebページ + flaskでのファイル保存処理を書いてもらいます。  <br>webページはtemplatesフォルダ内のindex.html、staticフォルダ内のupload.jsを編集してください。  <br>サーバ側の挙動はmain.py内の `def upload_file()` 関数に処理を追加してください。 | main.pyを実行してデバッグをしてください。 |
| 2   | アップロード画像と画像処理済み画像の閲覧 |     | python,html,css,js | アップロード画像と画像処理済み画像の閲覧ができるwebページ + flaskで表示する画像の取得する処理を書いてもらいます。  <br>webページはtemplatesフォルダ内のshow.html、staticフォルダ内のshow.jsを編集してください。  <br>サーバ側の挙動はmain.py内の `def show()` 関数に処理を追加してください。 | main.pyを実行してデバッグをしてください。 |
| 3   | ディレクトリ監視から各画像処理呼び出しをするプログラム |     | python | pythonでwatchdogを用いてディレクトリを監視して、ファイルが追加される度に各画像処理を呼び出す処理を書いてもらいます。  <br>moduleフォルダ内のdirectoryMonitoring.pyに処理を追加して、main.py内の「ディレクトリ監視関数の追加」というコメントの下に監視を始める処理を追加してください。  <br>各画像処理の呼び出しに関しては、PostProcessingクラスを参照してください。 | directoryMonitoring.pyを実行してデバッグをしてください。 |
| 4   | 顔検出してモザイク |     | python | pythonでopenCVを用いて顔検出してモザイクをかける処理を書いてもらいます。  <br>moduleフォルダ内のpostProcessing.pyに書かれているPostProcessingクラス内に関数を追加して処理を書いてください。また、出力する画像はprocessedフォルダに格納されるようにしてください。  <br>作成した関数については`self.funcList` に登録しておいてください。 | postProcessing.pyを実行してデバッグをしてください。 |
| 5   | 顔検出して枠で囲う |     | python | pythonでopenCVを用いて顔検出して枠で囲う処理を書いてもらいます。  <br>基本的な流れは4番と同様です。 | postProcessing.pyを実行してデバッグをしてください。 |
| 6   | Cannyフィルタによる輪郭抽出 |     | python | pythonでopenCVを用いてCannyフィルタによる輪郭抽出をする処理を書いてもらいます。  <br>基本的な流れは4番と同様です。 | postProcessing.pyを実行してデバッグをしてください。 |
| 7   | 画像のグレースケール化 (できれば2値化も) |     | python | pythonでopenCVを用いて画像のグレースケール化 (できれば2値化も)をする処理を書いてもらいます。  <br>基本的な流れは4番と同様です。 | postProcessing.pyを実行してデバッグをしてください。 |

</details>

<br>
<br>
<h1 id="git-github-workflow">GitとGitHubの運用方法</h1>

### 概要
このガイドでは、プロジェクトでのGitおよびGitHubの基本的な運用方法について説明します。チームメンバーは、以下のルールに従って作業を進めてください。

### ブランチ戦略
- **メインブランチには直接触れないでください。** メインブランチは安定したコードのみを含むべきで、直接の変更は行いません。
- 新しいブランチはプロジェクトリーダーが作成します。ブランチの追加が必要な場合は、リーダーに連絡してください。

### コミットのガイドライン
- コミット時には、以下のプレフィックスをタイトルに付けてください。これにより、コミットの目的が明確になります。
  - `feat:` 新しい機能の追加
  - `fix:` バグの修正
  - `docs:` ドキュメントのみの変更
  - `style:` コードの意味に影響を与えない変更（空白、書式設定、セミコロンの追加など）
  - `refactor:` バグの修正も機能の追加も行わないコード変更
  - `perf:` パフォーマンスを向上させるコード変更

### プルリクエスト（PR）の運用
- 機能の追加やバグの修正が完了したら、プルリクエストを作成してください。
- プルリクエストは、変更内容が他のチームメンバーによってレビューされ、承認されることを目的としています。
- プルリクエストのタイトルは、抽象的に書かず変更の内容を正確に反映させるようにしてください。
	- #### <span style="color:  red;">※カレントディレクトリ直下にPRテンプレートを作成しておいたのでそちらをコピペして使用してください。</span>

### issueの活用
- GitHubには**issue**というものがあります。これは自分では解決できない、エラー・バグに遭遇した時や、新しい機能の追加を提案したい時に、他の人に協力をお願いする / リーダーに承認をもらう ためのものです。
	- 今回では、「時間が余ったので、他の画像処理も実装したい」、「〇〇機能の実装が難しいので△△機能の実装に切り替えたい」、など
- issueを作成するには**メニュー バーでRepositoryを選択し、Create issue on GitHub**をクリックします。
- issueのタイトルも同様に、抽象的に書かず変更の内容を正確に反映させるようにしてください。
	- #### <span style="color:  red;">※issueテンプレートを作成しておいたのでそちらを使用してください。</span>
- プログラミングで詰まった時には、こちらを使用してアドバイスをもらってください。また、やり方が分からない場合はリーダーまで連絡をお願いします。

### マージのポリシー
- マージはプロジェクトリーダーが行います。レビューが完了し、承認されたプルリクエストは、リーダーがマージします。
<br>
<br>

<h1 id="discord-workflow">Discordの運用方法</h1>

### 概要
今回Discordは主に連絡と情報共有の為に使用していきます。
LINEだと情報がカテゴリー分けできないのでこちらを採用しました。
チーム開発をするにあたってこんな感じで使いたいというイメージ
- **バグが発生した / よく分からないエラーが出る**　-->　issueを作成して報告
- **ある程度処理がまとまって実装できた**　-->　プルリクエスト
- **どうしても〇〇の処理が実装できない**　-->　#相談 に投稿
<br>
以下にそれぞれのチャンネルの使い方を記載しておきます。

---
### はじめに
- ここに上記の概要っぽいことが書いてあります。 
### チームアナウンス
- リーダーからの連絡はここから送るつもりです。
- 誰が読んだか知りたいので読んだら必ずリアクションをお願いします。
- 基本メンションする予定ですが、念の為通知をオンしておいてください。
### member
- ここは気にしなくて大丈夫です。
- 入ってきたメンバーが表示されます。
### issue報告
- ここで作成したissueの報告をしてもらいます。
- タイトルに作成したissueのタイトルをコピペして投稿してください。
- 本文は何か伝えておきたいことがなければ無くて大丈夫です。（GitHubの方で書いてもらう為）
### プルリクエスト報告
- こちらも運用方法はissue報告と同様です。
- ここで作成したプルリクエストの報告をしてもらいます。
- タイトルに作成したプルリクエストのタイトルをコピペして投稿してください。
- 本文は何か伝えておきたいことがなければ無くて大丈夫です。（GitHubの方で書いてもらう為）
### ディレクトリ変更報告
- ディレクトリを変更する前 / 後 にこちらで報告をしてください。
- 連絡せずにプルリクエストを送るのはしないようにしてください。
### ブランチ作成依頼
- ディレクトリのやつと同じような感じです。
- 今回、ブランチはリーダーが作成するので、追加のブランチが必要になった場合はこちらに連絡お願いします。
### 相談
- 少しissueと運用方法が似ていますが、何か困ったことがあったらこちらを利用してください。
- イメージとしては〇〇の処理を実装したい時に参考になるサイトを教えて欲しい時などに使用してください。
### 雑談
- その名の通りです。
- 特にルールはないです。
### 参考文献
- プロジェクトを進める上で何か参考になりそうなサイトがあったらこちらで共有してくれると助かります。

---
### 最後に
こんだけチャンネルの説明をしましたが、GitHub関連以外のチャンネルは無理して利用しなくて大丈夫です。
ただ、分からなくて何もしなかった / 出来なかったよりかは誰かに聞いた方が良いので、分からなくて少しでもコーディングに詰まったら誰かに聞きましょう。
discord上で聞いて答えが返ってこなかったらそれはチームの責任なので、自分が分かることは積極的に教えてあげてください。